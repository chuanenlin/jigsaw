{"ast":null,"code":"var _jsxFileName = \"/Users/chuanenl/MyDrive/CMU/Projects/Jigsaw/Code/Frontend/src/components/input-output/OutputPanel.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { CircularProgress, Typography } from '@mui/material';\nimport { BlockProcessStatus, useWorkspaceContext } from '../../context/WorkspaceContext';\nimport { copyToClipBoard, getModalityEmojiOrEmpty, getOutputFromResponse, hasOutput, isInputBlock, isTextOutput, saveFile } from './input-output.util';\nimport { MediaViewer } from './MediaViewer';\nimport { PanelHeader } from './PanelHeader';\nimport { CopyAll, Save } from '@mui/icons-material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst extractBlockOutput = () => {\n  _s();\n  const {\n    selectedProcessableBlock\n  } = useWorkspaceContext();\n  if (!selectedProcessableBlock) {\n    // TODO: show output of the last block in the chain\n    return null;\n  }\n  if (isInputBlock(selectedProcessableBlock)) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 12\n    }, this);\n  }\n  const getBlockOutput = () => {\n    if (!hasOutput(selectedProcessableBlock)) {\n      return /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"Processed with no output!!!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 14\n      }, this);\n    }\n    const output = selectedProcessableBlock.output;\n    const content = getOutputFromResponse(output);\n    const modality = selectedProcessableBlock.blockData.outputModality;\n    return /*#__PURE__*/_jsxDEV(MediaViewer, {\n      content: content,\n      modality: modality\n    }, selectedProcessableBlock === null || selectedProcessableBlock === void 0 ? void 0 : selectedProcessableBlock.blocklyBlock.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  };\n  switch (selectedProcessableBlock === null || selectedProcessableBlock === void 0 ? void 0 : selectedProcessableBlock.processStatus) {\n    case BlockProcessStatus.STARTED:\n      return /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 14\n      }, this);\n    case BlockProcessStatus.FINISHED:\n      return getBlockOutput();\n    case BlockProcessStatus.FAILED:\n      return /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"Failed to process block\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 14\n      }, this);\n    default:\n      return /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 14\n      }, this);\n  }\n};\n_s(extractBlockOutput, \"tPmys6b6bhTuTyWLY+orKlgIoJY=\", false, function () {\n  return [useWorkspaceContext];\n});\nexport const OutputPanel = () => {\n  _s2();\n  const {\n    selectedProcessableBlock\n  } = useWorkspaceContext();\n  const onActionButtonClicked = async () => {\n    const output = selectedProcessableBlock === null || selectedProcessableBlock === void 0 ? void 0 : selectedProcessableBlock.output;\n    if (!output) {\n      return;\n    }\n    const content = getOutputFromResponse(output);\n    if (!content) {\n      throw new Error('No content to save');\n    }\n    if (isTextOutput(selectedProcessableBlock)) {\n      return copyToClipBoard(content);\n    }\n    saveFile(content);\n  };\n  const getActionButton = () => {\n    const icon = isTextOutput(selectedProcessableBlock) ? /*#__PURE__*/_jsxDEV(CopyAll, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 59\n    }, this) : /*#__PURE__*/_jsxDEV(Save, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 73\n    }, this);\n    const title = isTextOutput(selectedProcessableBlock) ? 'Copy' : 'Save';\n    return {\n      icon,\n      title,\n      label: title,\n      onClick: onActionButtonClicked\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `\n        w-full\n        h-full\n        bg-white\n        rounded-2xl\n        border\n        border-solid\n        border-neutral-400\n        flex-grow-0\n        flex-shrink-0\n        flex\n        flex-col\n        justify-start\n        box-border\n        ${selectedProcessableBlock === undefined || (selectedProcessableBlock === null || selectedProcessableBlock === void 0 ? void 0 : selectedProcessableBlock.blockData.blockType) === 'input' ? 'opacity-30' : ''}\n      `,\n    children: [/*#__PURE__*/_jsxDEV(PanelHeader, {\n      title: `${getModalityEmojiOrEmpty(selectedProcessableBlock === null || selectedProcessableBlock === void 0 ? void 0 : selectedProcessableBlock.blockData.outputModality)} Output`,\n      button: hasOutput(selectedProcessableBlock) && getActionButton()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-full box-border flex justify-center items-center overflow-hidden\",\n      children: extractBlockOutput()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n_s2(OutputPanel, \"tPmys6b6bhTuTyWLY+orKlgIoJY=\", false, function () {\n  return [useWorkspaceContext];\n});\n_c = OutputPanel;\nvar _c;\n$RefreshReg$(_c, \"OutputPanel\");","map":{"version":3,"names":["CircularProgress","Typography","BlockProcessStatus","useWorkspaceContext","copyToClipBoard","getModalityEmojiOrEmpty","getOutputFromResponse","hasOutput","isInputBlock","isTextOutput","saveFile","MediaViewer","PanelHeader","CopyAll","Save","jsxDEV","_jsxDEV","extractBlockOutput","_s","selectedProcessableBlock","variant","fileName","_jsxFileName","lineNumber","columnNumber","getBlockOutput","children","output","content","modality","blockData","outputModality","blocklyBlock","id","processStatus","STARTED","color","FINISHED","FAILED","OutputPanel","_s2","onActionButtonClicked","Error","getActionButton","icon","title","label","onClick","className","undefined","blockType","button","_c","$RefreshReg$"],"sources":["/Users/chuanenl/MyDrive/CMU/Projects/Jigsaw/Code/Frontend/src/components/input-output/OutputPanel.tsx"],"sourcesContent":["import { CircularProgress, Typography } from '@mui/material'\nimport { BlockProcessStatus, useWorkspaceContext } from '../../context/WorkspaceContext'\nimport {\n  copyToClipBoard,\n  getModalityEmojiOrEmpty,\n  getOutputFromResponse,\n  hasOutput,\n  isInputBlock,\n  isTextOutput,\n  saveFile,\n} from './input-output.util'\nimport { MediaViewer } from './MediaViewer'\nimport { PanelHeader } from './PanelHeader'\nimport { CopyAll, Save } from '@mui/icons-material'\n\nconst extractBlockOutput = () => {\n  const { selectedProcessableBlock } = useWorkspaceContext()\n\n  if (!selectedProcessableBlock) {\n    // TODO: show output of the last block in the chain\n    return null\n  }\n\n  if (isInputBlock(selectedProcessableBlock)) {\n    return <Typography variant='h5'></Typography>\n  }\n\n  const getBlockOutput = () => {\n    if (!hasOutput(selectedProcessableBlock)) {\n      return <Typography variant='h5'>Processed with no output!!!!</Typography>\n    }\n\n    const output = selectedProcessableBlock.output!\n\n    const content = getOutputFromResponse(output)\n\n    const modality = selectedProcessableBlock.blockData.outputModality\n\n    return (\n      <MediaViewer\n        content={content}\n        modality={modality}\n        key={selectedProcessableBlock?.blocklyBlock.id}\n      />\n    )\n  }\n\n  switch (selectedProcessableBlock?.processStatus) {\n    case BlockProcessStatus.STARTED:\n      return <CircularProgress color='secondary' />\n    case BlockProcessStatus.FINISHED:\n      return getBlockOutput()\n    case BlockProcessStatus.FAILED:\n      return <Typography variant='h5'>Failed to process block</Typography>\n    default:\n      return <Typography variant='h5'></Typography>\n  }\n}\n\nexport const OutputPanel = () => {\n  const { selectedProcessableBlock } = useWorkspaceContext()\n\n  const onActionButtonClicked = async () => {\n    const output = selectedProcessableBlock?.output\n    if (!output) {\n      return\n    }\n\n    const content = getOutputFromResponse(output)\n\n    if (!content) {\n      throw new Error('No content to save')\n    }\n\n    if (isTextOutput(selectedProcessableBlock)) {\n      return copyToClipBoard(content)\n    }\n\n    saveFile(content)\n  }\n\n  const getActionButton = () => {\n    const icon = isTextOutput(selectedProcessableBlock) ? <CopyAll /> : <Save />\n    const title = isTextOutput(selectedProcessableBlock) ? 'Copy' : 'Save'\n\n    return {\n      icon,\n      title,\n      label: title,\n      onClick: onActionButtonClicked,\n    }\n  }\n\n  return (\n    <div\n      className={`\n        w-full\n        h-full\n        bg-white\n        rounded-2xl\n        border\n        border-solid\n        border-neutral-400\n        flex-grow-0\n        flex-shrink-0\n        flex\n        flex-col\n        justify-start\n        box-border\n        ${\n          selectedProcessableBlock === undefined ||\n          selectedProcessableBlock?.blockData.blockType === 'input'\n            ? 'opacity-30'\n            : ''\n        }\n      `}\n    >\n      <PanelHeader\n        title={`${getModalityEmojiOrEmpty(\n          selectedProcessableBlock?.blockData.outputModality,\n        )} Output`}\n        button={hasOutput(selectedProcessableBlock) && getActionButton()}\n      />\n      <div className='w-full h-full box-border flex justify-center items-center overflow-hidden'>\n        {extractBlockOutput()}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}