{"ast":null,"code":"import get from 'lodash/get';\nimport mapValues from 'lodash/mapValues';\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { joinName } from './joinName';\nimport { useForm } from './useForm';\nfunction propagate(prop, schema, state, fallback) {\n  const forcedFallbackInProp = prop === true || prop === undefined;\n  const forcedFallbackInSchema = schema === true || schema === undefined;\n  const schemaValue = forcedFallbackInSchema ? fallback : schema;\n  const value = prop === '' || prop === false || prop === null || forcedFallbackInProp && (forcedFallbackInSchema || !state) ? '' : forcedFallbackInProp ? schemaValue : prop;\n  return [value, schemaValue];\n}\nexport function useField(fieldName, props, options) {\n  var _a;\n  const context = useForm();\n  const name = joinName((options === null || options === void 0 ? void 0 : options.absoluteName) ? '' : context.name, fieldName);\n  const field = context.schema.getField(name);\n  const usesInitialValue = (options === null || options === void 0 ? void 0 : options.initialValue) !== false;\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const onChangeCalled = usesInitialValue ? useRef(false) : {\n    current: false\n  };\n  const state = mapValues(context.state, (prev, key) => {\n    const next = props[key];\n    return next !== null && next !== undefined ? !!next : prev;\n  });\n  const changed = !!get(context.changedMap, name);\n  const error = context.schema.getError(name, context.error);\n  const errorMessage = context.schema.getErrorMessage(name, context.error);\n  const fieldType = context.schema.getType(name);\n  const fields = context.schema.getSubfields(name);\n  const schemaProps = context.schema.getProps(name);\n  const [label, labelFallback] = propagate(props.label,\n  // @ts-expect-error The `schema.getProps` should be typed more precisely.\n  schemaProps.label, state.label, '');\n  const [placeholder] = propagate(props.placeholder,\n  // @ts-expect-error The `schema.getProps` should be typed more precisely.\n  schemaProps.placeholder, state.placeholder, label || labelFallback);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const id = useMemo(() => context.randomId(), []);\n  const onChange = useCallback(function (value) {\n    let key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : name;\n    onChangeCalled.current = true;\n    context.onChange(key, value);\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [context.onChange, name]);\n  // @ts-expect-error The `props` should be typed more precisely.\n  const valueFromModel = get(context.model, name);\n  let initialValue;\n  let value = (_a = props.value) !== null && _a !== void 0 ? _a : valueFromModel;\n  if (usesInitialValue) {\n    if (!onChangeCalled.current) {\n      if (value === undefined) {\n        value = context.schema.getInitialValue(name);\n        initialValue = value;\n      } else if (props.value !== undefined && props.value !== valueFromModel) {\n        initialValue = props.value;\n      }\n    }\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      var _a;\n      const required = (_a = props.required) !== null && _a !== void 0 ? _a : schemaProps.required;\n      if (required && initialValue !== undefined) {\n        onChange(initialValue);\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n  }\n  const fieldProps = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({\n    id\n  }, state), {\n    changed,\n    error,\n    errorMessage,\n    field,\n    fieldType,\n    fields,\n    onChange,\n    value\n  }), schemaProps), props), {\n    label,\n    name,\n    // TODO: Should we assert `typeof placeholder === 'string'`?\n    placeholder: placeholder\n  });\n  return [fieldProps, context];\n}","map":{"version":3,"names":["get","mapValues","useCallback","useEffect","useMemo","useRef","joinName","useForm","propagate","prop","schema","state","fallback","forcedFallbackInProp","undefined","forcedFallbackInSchema","schemaValue","value","useField","fieldName","props","options","_a","context","name","absoluteName","field","getField","usesInitialValue","initialValue","onChangeCalled","current","prev","key","next","changed","changedMap","error","getError","errorMessage","getErrorMessage","fieldType","getType","fields","getSubfields","schemaProps","getProps","label","labelFallback","placeholder","id","randomId","onChange","arguments","length","valueFromModel","model","getInitialValue","required","fieldProps","Object","assign"],"sources":["/Users/chuanenl/MyDrive/CMU/Projects/Jigsaw/Code/Frontend/node_modules/uniforms/esm/useField.js"],"sourcesContent":["import get from 'lodash/get';\nimport mapValues from 'lodash/mapValues';\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { joinName } from './joinName';\nimport { useForm } from './useForm';\nfunction propagate(prop, schema, state, fallback) {\n    const forcedFallbackInProp = prop === true || prop === undefined;\n    const forcedFallbackInSchema = schema === true || schema === undefined;\n    const schemaValue = forcedFallbackInSchema ? fallback : schema;\n    const value = prop === '' ||\n        prop === false ||\n        prop === null ||\n        (forcedFallbackInProp && (forcedFallbackInSchema || !state))\n        ? ''\n        : forcedFallbackInProp\n            ? schemaValue\n            : prop;\n    return [value, schemaValue];\n}\nexport function useField(fieldName, props, options) {\n    var _a;\n    const context = useForm();\n    const name = joinName((options === null || options === void 0 ? void 0 : options.absoluteName) ? '' : context.name, fieldName);\n    const field = context.schema.getField(name);\n    const usesInitialValue = (options === null || options === void 0 ? void 0 : options.initialValue) !== false;\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const onChangeCalled = usesInitialValue ? useRef(false) : { current: false };\n    const state = mapValues(context.state, (prev, key) => {\n        const next = props[key];\n        return next !== null && next !== undefined ? !!next : prev;\n    });\n    const changed = !!get(context.changedMap, name);\n    const error = context.schema.getError(name, context.error);\n    const errorMessage = context.schema.getErrorMessage(name, context.error);\n    const fieldType = context.schema.getType(name);\n    const fields = context.schema.getSubfields(name);\n    const schemaProps = context.schema.getProps(name);\n    const [label, labelFallback] = propagate(props.label, \n    // @ts-expect-error The `schema.getProps` should be typed more precisely.\n    schemaProps.label, state.label, '');\n    const [placeholder] = propagate(props.placeholder, \n    // @ts-expect-error The `schema.getProps` should be typed more precisely.\n    schemaProps.placeholder, state.placeholder, label || labelFallback);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const id = useMemo(() => context.randomId(), []);\n    const onChange = useCallback((value, key = name) => {\n        onChangeCalled.current = true;\n        context.onChange(key, value);\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [context.onChange, name]);\n    // @ts-expect-error The `props` should be typed more precisely.\n    const valueFromModel = get(context.model, name);\n    let initialValue;\n    let value = (_a = props.value) !== null && _a !== void 0 ? _a : valueFromModel;\n    if (usesInitialValue) {\n        if (!onChangeCalled.current) {\n            if (value === undefined) {\n                value = context.schema.getInitialValue(name);\n                initialValue = value;\n            }\n            else if (props.value !== undefined && props.value !== valueFromModel) {\n                initialValue = props.value;\n            }\n        }\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        useEffect(() => {\n            var _a;\n            const required = (_a = props.required) !== null && _a !== void 0 ? _a : schemaProps.required;\n            if (required && initialValue !== undefined) {\n                onChange(initialValue);\n            }\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, []);\n    }\n    const fieldProps = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ id }, state), { changed,\n        error,\n        errorMessage,\n        field,\n        fieldType,\n        fields,\n        onChange,\n        value }), schemaProps), props), { label,\n        name, \n        // TODO: Should we assert `typeof placeholder === 'string'`?\n        placeholder: placeholder });\n    return [fieldProps, context];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}